# =============================================================================
# Infinite Memory Chat - Configuration Template
# =============================================================================
# Copy this file to .env and update with your actual values
# cp env.example .env

# =============================================================================
# VECTOR BACKEND SELECTION
# =============================================================================
# Choose your vector storage backend:
#   'openai'  - Use OpenAI's Vector Store (recommended for <10K messages/month)
#   'mongodb' - Use MongoDB Vector Search (cost-effective for >50K messages/month)
VECTOR_BACKEND=openai

# =============================================================================
# OPENAI CONFIGURATION (REQUIRED FOR BOTH BACKENDS)
# =============================================================================
# OpenAI API key - required for:
#   - Chat responses (both backends)
#   - Embedding generation (both backends)
# Get your key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=your_openai_api_key_here

# Model selection - adjust based on your needs and budget
# Options: gpt-4o, gpt-4o-mini, gpt-4-turbo
CHAT_MODEL=gpt-4o-mini

# Options: text-embedding-3-small, text-embedding-3-large
EMBEDDING_MODEL=text-embedding-3-small

# =============================================================================
# MONGODB CONFIGURATION (only needed if VECTOR_BACKEND=mongodb)
# =============================================================================
# MongoDB connection string - choose your deployment:

# Option 1: MongoDB Atlas (cloud, recommended for production)
# MONGODB_CONNECTION_STRING=mongodb+srv://username:password@cluster.mongodb.net/

# Option 2: Local MongoDB (development only)
# MONGODB_CONNECTION_STRING=mongodb://localhost:27017

# Option 3: MongoDB with authentication
# MONGODB_CONNECTION_STRING=mongodb://username:password@localhost:27017

MONGODB_CONNECTION_STRING=mongodb://localhost:27017
MONGODB_DATABASE=infinite_memory_chat

# =============================================================================
# ADVANCED APPLICATION CONFIGURATION (optional)
# =============================================================================
# These settings control the conversation memory management
# Leave commented to use defaults

# Maximum messages in active conversation before archiving
# MAX_MESSAGES=20

# Number of messages to archive at once
# ARCHIVE_COUNT=10

# Maximum archive files before consolidation
# MAX_ARCHIVE_FILES=100

# Number of archive files to consolidate into one
# CONSOLIDATION_COUNT=50

# =============================================================================
# COST OPTIMIZATION GUIDE
# =============================================================================
# Backend Selection Guide:
#
# OpenAI Vector Store:
#   - Best for: <10K messages/month
#   - Cost: $3-33/month
#   - Pros: No infrastructure, immediate setup
#   - Cons: Vendor lock-in, scales poorly at high volume
#
# MongoDB Vector Search:
#   - Best for: >50K messages/month
#   - Cost: $300-700/month (Atlas), varies (self-hosted)
#   - Pros: Data ownership, horizontal scaling, cost-effective at scale
#   - Cons: Requires setup, infrastructure management
#
# Model Selection Guide:
#   - gpt-4o-mini: Most cost-effective, good quality
#   - gpt-4o: Highest quality, higher cost
#   - text-embedding-3-small: Cost-effective embeddings (1536 dims)
#   - text-embedding-3-large: Higher quality embeddings (3072 dims)

# =============================================================================
# MONGODB ATLAS OR CE SETUP NOTES
# =============================================================================
# After creating your MongoDB CE or Atlas cluster:
#
# 1. Create vector search index manually in Atlas UI:
#    - Index name: vector_index
#    - Field: content_embedding
#    - Type: vector
#    - Dimensions: 1536 (for text-embedding-3-small)
#    - Similarity: cosine
#    - Filter fields: session_id, archive_id, type
#
# 2. Configure network access (allow your IP)
# 3. Create database user with read/write permissions
# 4. Update connection string with your credentials
#
# =============================================================================
# MONGODB CE >8.2.x NOTES
# =============================================================================
#
# --------------------------------------------------------
# From mongosh (examples). If manual creation is required.
# CREATE INDEX
# --------------------------------------------------------
# db.chat_memory_20251231_232648.createIndex(
#   {
#      content_embedding: 1,
#      session_id: 1,
#      archive_id: 1,
#      type: 1
#    },
#    {
#      name: "vector_index"
#    }
#  )
#
# ----------------------------
# GET INDEXES to check results
# ----------------------------
# db.chat_memory_20251231_232648.getIndexes()
